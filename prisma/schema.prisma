// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}


model Tenant {
  id            String   @id @default(uuid()) 
  name          String
  users         TenantAccount[]
  brands        Brand[]
  settings      TenantSettings[] 
}

model User {
  id            String   @id @default(uuid()) 
  name          String
  lastName      String?
  password      String?
  email         String   @unique
  emailVerified Boolean @default(false)
  tenantAccount       TenantAccount[]
}

model TenantAccount{
  id            String   @id @default(uuid()) 
  role          Role @default(AGENT)
  tenant        Tenant @relation(fields: [tenantId], references: [id])
  tenantId      String @unique
  user          User @relation(fields: [userId], references: [id])
  userId        String @unique
}

enum Role {
  AGENT
  ADMIN
  OWNER
}

model TenantSettings{
  id       String @id @default(uuid()) 
  tenant    Tenant @relation(fields: [id], references: [id])
}

model Brand{
  id            String   @id @default(uuid()) 
  name          String
  tenant        Tenant @relation(fields: [id], references: [id])
  settings      BrandSettings[]

}

model BrandSettings{
  id            String   @id @default(uuid()) 
  brand         Brand @relation(fields: [id], references: [id])
}

model VerificationToken {
  id          String   @id @default(uuid()) 
  identifier  String?  
  email       String?  
  token       String   @unique
  expires     DateTime

  @@unique([identifier, token])
}
